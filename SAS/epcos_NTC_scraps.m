function epcos_NTC_scraps

% Derive polyfit of T(R) for NTC thermistor
% Block of values below copied from tech datasheet.
% Looks like fit to log(R) yields near linear over 
% the temperature range from -10 C to 50 C
% A 3rd order (cubic) polyfit looks good.

%Also, need to first find R_NTC from measured AI voltage
% R_NTC = (V_NTC * 10kohm)./(V_cc - V_NTC)

%%

NTC = [-40.0 168250 160210 176290 4.8 0.7 6.7
-35.0 121300 115930 126660 4.4 0.7 6.4
-30.0 88500 84893 92107 4.1 0.7 6.2
-25.0 65185 62744 67626 3.7 0.6 6.0
-20.0 48535 46871 50199 3.4 0.6 5.8
-15.0 36465 35326 37603 3.1 0.6 5.6
-10.0 27665 26882 28448 2.8 0.5 5.4
-5.0 21158 20619 21696 2.5 0.5 5.3
0.0 16325 15954 16696 2.3 0.4 5.1
5.0 12694 12438 12949 2.0 0.4 5.0
10.0 9950 9775 10125 1.8 0.4 4.8
15.0 7854 7735 7973 1.5 0.3 4.7
20.0 6245 6165 6325 1.3 0.3 4.5
25.0 5000 4950 5050 1.0 0.2 4.4
30.0 4029 3977 4080 1.3 0.3 4.3
35.0 3266 3217 3314 1.5 0.4 4.1
40.0 2664 2618 2709 1.7 0.4 4.0
45.0 2184 2143 2226 1.9 0.5 3.9
50.0 1802 1764 1839 2.1 0.5 3.8
55.0 1493 1459 1527 2.3 0.6 3.7
60.0 1244 1213 1275 2.5 0.7 3.6
65.0 1042 1014 1069 2.6 0.8 3.5
70.0 876.0 851.4 900.6 2.8 0.8 3.4
75.0 740.7 718.7 762.7 3.0 0.9 3.3
80.0 629.0 609.3 648.7 3.1 1.0 3.2
85.0 536.2 518.5 553.8 3.3 1.0 3.2
90.0 458.8 443.0 474.7 3.4 1.1 3.1
95.0 394.3 380.1 408.4 3.6 1.2 3.0
100.0 340.0 327.3 352.7 3.7 1.3 2.9
105.0 294.3 282.9 305.7 3.9 1.4 2.9
110.0 255.6 245.3 265.9 4.0 1.4 2.8
115.0 222.7 213.5 231.9 4.2 1.5 2.7
120.0 194.7 186.3 203.0 4.3 1.6 2.7
125.0 170.9 163.3 178.4 4.4 1.7 2.6
130.0 150.5 143.6 157.3 4.5 1.8 2.5
135.0 132.7 126.5 138.9 4.7 1.9 2.5
140.0 117.4 111.8 123.0 4.8 2.0 2.4
145.0 104.2 99.07 109.3 4.9 2.1 2.4
150.0 92.65 88.02 97.28 5.0 2.2 2.3
155.0 82.67 78.45 86.90 5.1 2.3 2.3];
%%
% R_NTC = (V_NTC * 10kohm)./(V_cc - V_NTC)
ntc.T = NTC(:,1); ntc.R = NTC(:,2);

sub_T = ntc.T>-10 & ntc.T<50;
% P = polyfit(log10(ntc.R(sub_T)), ntc.T(sub_T), 3);
P = [-1.1438   20.8279 -159.6671  388.5148];
figure; semilogx(ntc.R,ntc.T, 'o-',ntc.R,polyval(P,log10(ntc.R)),'k-');xlabel('R [ohm]');ylabel('T [C]');
ylim([-10,50])